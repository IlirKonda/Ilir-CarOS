:root{
  --bg:#000;
  --fg:#fff;
  --muted:#9aa0a6;

  --card: rgba(15,15,15,0.65);
  --card2: rgba(15,15,15,0.45);
  --stroke: rgba(255,255,255,0.08);

  --pad:16px;
  --radius:22px;
  --sidebarW: 220px;

  font-family: -apple-system, system-ui, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}

/* DAY / NIGHT themes (bleiben wie gehabt) */
html[data-theme="day"]{
  --bg:#0b0f14;
  --fg:#ffffff;
  --muted:#a9b2bb;
  --card: rgba(18,22,28,0.62);
  --card2: rgba(18,22,28,0.42);
  --stroke: rgba(255,255,255,0.10);
}
html[data-theme="night"]{
  --bg:#000000;
  --fg:#ffffff;
  --muted:#8f98a3;
  --card: rgba(10,10,10,0.72);
  --card2: rgba(10,10,10,0.52);
  --stroke: rgba(255,255,255,0.08);
}

*{ box-sizing:border-box; }
html,body{ height:100%; margin:0; background:var(--bg); color:var(--fg); overflow:hidden; }

/* CarOS background */
body::before{
  content:"";
  position:fixed;
  inset:0;
  background:
    radial-gradient(circle at 20% 30%, rgba(31,111,235,0.20), transparent 42%),
    radial-gradient(circle at 80% 70%, rgba(255,45,85,0.12), transparent 48%),
    linear-gradient(135deg, var(--bg) 0%, #0b0f14 100%);
  z-index:-2;
  pointer-events:none;
}
body::after{
  content:"";
  position:fixed;
  inset:-50%;
  background: radial-gradient(circle, rgba(255,255,255,0.03) 0%, transparent 60%);
  animation: moveGlow 18s linear infinite;
  z-index:-1;
  pointer-events:none;
}
html[data-theme="night"] body::after{ opacity:0.6; }
@keyframes moveGlow {
  0%   { transform: translate(0%,0%) rotate(0deg); }
  50%  { transform: translate(20%,10%) rotate(180deg); }
  100% { transform: translate(0%,0%) rotate(360deg); }
}

/* Layout shell */
.shell{
  height:100%;
  padding:
    calc(env(safe-area-inset-top) + var(--pad))
    calc(env(safe-area-inset-right) + var(--pad))
    calc(env(safe-area-inset-bottom) + var(--pad))
    calc(env(safe-area-inset-left) + var(--pad));
  display:flex;
  gap:14px;
}

/* Sidebar */
.sidebar{
  width: var(--sidebarW);
  min-width: var(--sidebarW);
  display:flex;
  flex-direction:column;
  gap:10px;

  border:1px solid var(--stroke);
  border-radius: var(--radius);
  backdrop-filter: blur(18px);
  background: linear-gradient(180deg, var(--card), var(--card2));
  padding:14px;
}

.brandTitle{
  font-size:22px;
  font-weight:900;
  letter-spacing:0.6px;
  background: linear-gradient(90deg, #1f6feb, #ff2d55);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.brandSub{ color:var(--muted); font-size:12px; margin-top:2px; }

.navbtn{
  display:flex;
  align-items:center;
  gap:10px;
  padding:12px 12px;
  border-radius:16px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,0.18);
  color: var(--fg);
  font-weight:800;
  font-size:16px;
  text-align:left;
  -webkit-tap-highlight-color: transparent;
}
.navbtn:active{ transform: scale(0.99); }
.navbtn.active{
  border-color: rgba(31,111,235,0.45);
  box-shadow: 0 0 22px rgba(31,111,235,0.16);
  background: rgba(31,111,235,0.10);
}
.ico{ font-size:22px; }
.txt{ flex:1; }

.spacer{ flex:1; }

.pill{
  border:1px solid var(--stroke);
  background: rgba(0,0,0,0.30);
  color:var(--fg);
  padding:10px 12px;
  border-radius:999px;
  font-weight:900;
}

/* Stage */
.stage{
  flex:1;
  border:1px solid var(--stroke);
  border-radius: var(--radius);
  backdrop-filter: blur(18px);
  background: linear-gradient(180deg, var(--card), var(--card2));
  overflow:hidden;
  display:flex;
}

.view{
  width:100%;
  height:100%;
  display:flex;
  flex-direction:column;
}

.viewHeader{
  display:flex;
  justify-content:space-between;
  align-items:center;
  gap:12px;
  padding:16px;
  border-bottom: 1px solid rgba(255,255,255,0.06);
}

.viewTitle{ font-size:22px; font-weight:900; }
.viewSub{ color:var(--muted); font-size:13px; margin-top:2px; }

.viewActions{ display:flex; gap:10px; align-items:center; }

.panel{
  flex:1;
  padding:16px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.btn{
  padding:10px 14px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background: rgba(0,0,0,0.30);
  color:var(--fg);
  font-weight:900;
}
.primary{
  background:#1f6feb;
  border-color:#1f6feb;
}

.map{
  flex:1;
  width:100%;
  border:1px solid rgba(255,255,255,0.06);
  border-radius:18px;
  background:#000;
}

.nowPlaying{
  border:1px solid rgba(255,255,255,0.06);
  border-radius:18px;
  padding:14px;
  background: rgba(0,0,0,0.18);
}
.npTitle{ font-size:18px; font-weight:900; }
.npSub{ color:var(--muted); font-size:12px; margin-top:4px; }

.controls{
  display:flex;
  gap:12px;
}
.ctrl{
  flex:1;
  min-height:70px;
  font-size:30px;
  border-radius:18px;
  border:1px solid rgba(255,255,255,0.08);
  background: linear-gradient(145deg, rgba(15,15,15,0.7), rgba(26,26,26,0.7));
  color:var(--fg);
  font-weight:900;
}
.ctrl:active{
  background:#1f6feb;
  box-shadow: 0 0 22px rgba(31,111,235,0.55);
  transform: scale(0.99);
}

.note{
  color: var(--muted);
  font-size: 12px;
  line-height:1.3;
}

/* Setup form */
.form{ display:flex; flex-direction:column; gap:12px; max-width:720px; }
.lbl{ color:var(--muted); font-size:13px; display:flex; flex-direction:column; gap:8px; }
.inp{
  padding:12px 12px;
  border-radius:14px;
  border:1px solid var(--stroke);
  background:#000;
  color:var(--fg);
  font-size:16px;
}
.rowBtns{ display:flex; gap:10px; }

/* Rotation / Portrait mode: sidebar becomes bottom bar */
@media (orientation: portrait){
  :root{ --sidebarW: 100%; }

  .shell{
    flex-direction:column;
  }

  .sidebar{
    width:100%;
    min-width:0;
    flex-direction:row;
    align-items:center;
    gap:10px;
    padding:10px;
  }

  .brand{ display:none; }      /* optional: hide brand in portrait to save space */
  .spacer{ display:none; }

  .navbtn{
    flex:1;
    justify-content:center;
    padding:12px;
  }
  .txt{ display:none; }        /* icons only in portrait */
  .pill{ padding:10px 10px; }
}

/* Spotify big cover */
.spHero{
  display:flex;
  gap:14px;
  align-items:center;
  border:1px solid rgba(255,255,255,0.06);
  border-radius:18px;
  padding:12px;
  background: rgba(0,0,0,0.18);
}

.spCover{
  width:110px;
  height:110px;
  border-radius:16px;
  object-fit:cover;
  background:#000;
  border:1px solid rgba(255,255,255,0.06);
}

.spMeta{ display:flex; flex-direction:column; gap:6px; }

/* Optional: blurred cover background only in Spotify view */
.view[data-view="spotify"] .panel{ position:relative; }
.view[data-view="spotify"] .panel::before{
  content:"";
  position:absolute;
  inset:0;
  background-image: var(--sp-bg, none);
  background-size: cover;
  background-position:center;
  filter: blur(24px);
  opacity: 0.20;
  z-index:0;
  pointer-events:none;
}
.view[data-view="spotify"] .panel > *{ position:relative; z-index:1; }
